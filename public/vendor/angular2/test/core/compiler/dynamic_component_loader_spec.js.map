{"version":3,"sources":["dynamic_component_loader_spec.es6"],"names":[],"mappings":"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","file":"angular2/test/core/compiler/dynamic_component_loader_spec.js","sourcesContent":["import {AsyncTestCompleter,\n  beforeEach,\n  ddescribe,\n  xdescribe,\n  describe,\n  el,\n  dispatchEvent,\n  expect,\n  iit,\n  inject,\n  beforeEachBindings,\n  it,\n  xit,\n  SpyObject,\n  proxy} from 'angular2/test_lib';\nimport {IMPLEMENTS} from 'angular2/src/facade/lang';\nimport {MapWrapper,\n  ListWrapper} from 'angular2/src/facade/collection';\nimport {Promise,\n  PromiseWrapper} from 'angular2/src/facade/async';\nimport {DirectiveMetadataReader} from 'angular2/src/core/compiler/directive_metadata_reader';\nimport {DynamicComponentLoader} from 'angular2/src/core/compiler/dynamic_component_loader';\nimport {Decorator,\n  Viewport,\n  Component} from 'angular2/src/core/annotations/annotations';\nimport {ElementRef,\n  ElementInjector,\n  ProtoElementInjector,\n  PreBuiltObjects} from 'angular2/src/core/compiler/element_injector';\nimport {Compiler} from 'angular2/src/core/compiler/compiler';\nimport {AppProtoView,\n  AppView} from 'angular2/src/core/compiler/view';\nimport {ViewFactory} from 'angular2/src/core/compiler/view_factory';\nimport {AppViewHydrator} from 'angular2/src/core/compiler/view_hydrator';\nexport function main() {\n  describe(\"DynamicComponentLoader\", () => {\n    var compiler;\n    var viewFactory;\n    var directiveMetadataReader;\n    var viewHydrator;\n    var loader;\n    beforeEach(() => {\n      compiler = new SpyCompiler();\n      viewFactory = new SpyViewFactory();\n      viewHydrator = new SpyAppViewHydrator();\n      directiveMetadataReader = new DirectiveMetadataReader();\n      loader = new DynamicComponentLoader(compiler, directiveMetadataReader, viewFactory, viewHydrator);\n    });\n    function createProtoView() {\n      return new AppProtoView(null, null);\n    }\n    function createEmptyView() {\n      var view = new AppView(null, null, null, createProtoView(), MapWrapper.create());\n      view.init(null, [], [], [], []);\n      return view;\n    }\n    function createElementRef(view, boundElementIndex) {\n      var peli = new ProtoElementInjector(null, boundElementIndex, []);\n      var eli = new ElementInjector(peli, null);\n      var preBuiltObjects = new PreBuiltObjects(view, null, null);\n      eli.instantiateDirectives(null, null, null, preBuiltObjects);\n      return new ElementRef(eli);\n    }\n    describe(\"loadIntoExistingLocation\", () => {\n      describe('Load errors', () => {\n        it('should throw when trying to load a decorator', () => {\n          expect(() => loader.loadIntoExistingLocation(SomeDecorator, null)).toThrowError(\"Could not load 'SomeDecorator' because it is not a component.\");\n        });\n        it('should throw when trying to load a viewport', () => {\n          expect(() => loader.loadIntoExistingLocation(SomeViewport, null)).toThrowError(\"Could not load 'SomeViewport' because it is not a component.\");\n        });\n      });\n      it('should compile, create and hydrate the view', inject([AsyncTestCompleter], (async) => {\n        var log = [];\n        var protoView = createProtoView();\n        var hostView = createEmptyView();\n        var childView = createEmptyView();\n        viewHydrator.spy('hydrateDynamicComponentView').andCallFake((hostView, boundElementIndex, componentView, componentDirective, injector) => {\n          ListWrapper.push(log, ['hydrateDynamicComponentView', hostView, boundElementIndex, componentView]);\n        });\n        viewFactory.spy('getView').andCallFake((protoView) => {\n          ListWrapper.push(log, ['getView', protoView]);\n          return childView;\n        });\n        compiler.spy('compile').andCallFake((_) => PromiseWrapper.resolve(protoView));\n        var elementRef = createElementRef(hostView, 23);\n        loader.loadIntoExistingLocation(SomeComponent, elementRef).then((componentRef) => {\n          expect(log[0]).toEqual(['getView', protoView]);\n          expect(log[1]).toEqual(['hydrateDynamicComponentView', hostView, 23, childView]);\n          async.done();\n        });\n      }));\n    });\n  });\n}\nclass SomeDecorator {}\nObject.defineProperty(SomeDecorator, \"annotations\", {get: function() {\n    return [new Decorator({selector: 'someDecorator'})];\n  }});\nclass SomeViewport {}\nObject.defineProperty(SomeViewport, \"annotations\", {get: function() {\n    return [new Viewport({selector: 'someViewport'})];\n  }});\nclass SomeComponent {}\nObject.defineProperty(SomeComponent, \"annotations\", {get: function() {\n    return [new Component({selector: 'someComponent'})];\n  }});\nclass SpyCompiler extends SpyObject {\n  noSuchMethod(m) {\n    return super.noSuchMethod(m);\n  }\n}\nObject.defineProperty(SpyCompiler, \"annotations\", {get: function() {\n    return [new proxy, new IMPLEMENTS(Compiler)];\n  }});\nclass SpyViewFactory extends SpyObject {\n  noSuchMethod(m) {\n    return super.noSuchMethod(m);\n  }\n}\nObject.defineProperty(SpyViewFactory, \"annotations\", {get: function() {\n    return [new proxy, new IMPLEMENTS(ViewFactory)];\n  }});\nclass SpyAppViewHydrator extends SpyObject {\n  noSuchMethod(m) {\n    return super.noSuchMethod(m);\n  }\n}\nObject.defineProperty(SpyAppViewHydrator, \"annotations\", {get: function() {\n    return [new proxy, new IMPLEMENTS(AppViewHydrator)];\n  }});\nclass SpyAppView extends SpyObject {\n  noSuchMethod(m) {\n    return super.noSuchMethod(m);\n  }\n}\nObject.defineProperty(SpyAppView, \"annotations\", {get: function() {\n    return [new proxy, new IMPLEMENTS(AppView)];\n  }});\n//# sourceMappingURL=dynamic_component_loader_spec.js.map\n\n//# sourceMappingURL=./dynamic_component_loader_spec.map"]}